<!doctype html>
<html>
<head>
    <title>Flask Server</title>
    <style>
        /* CSS Propre */
        #jumpscare-video {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            object-fit: cover;
            z-index: 9999;
            background-color: black;
        }
    </style>
</head>
<body>

<h1>Biblioth√®que</h1>
<ul>
    <li><a href="/catalogue">Voir le catalogue (Pour tous)</a></li>
    <li><a href="/admin_livres">Gestion des livres (Admin seulement)</a></li>
    <li><a href="/authentification">Se connecter</a></li>
</ul>

<p>
    <a href="javascript:void(0)" onclick="lancerJumpscare()" style="color: gold; font-weight: bold; text-decoration: none; cursor: pointer;">
        üéÅ Cliquez ici pour le BONUS !
    </a>
</p>

<video id="jumpscare-video" preload="auto">
    <source src="{{ url_for('static', filename='foxy_mais pas pour l'instant.mp4') }}" type="video/mp4">
</video>

<script>
function lancerJumpscare() {
    var video = document.getElementById('jumpscare-video');
    
    // 1. Pr√©parer le son et le temps AVANT d'afficher
    video.muted = false;
    video.volume = 1.0;
    video.currentTime = 0; // Force le retour au d√©but pour √©viter le lag

    // 2. Afficher la vid√©o
    video.style.display = 'block';

    // 3. Tenter le plein √©cran
    if (video.requestFullscreen) {
        video.requestFullscreen();
    } else if (video.webkitRequestFullscreen) {
        video.webkitRequestFullscreen();
    }

    // 4. Lancer la lecture
    var playPromise = video.play();

    if (playPromise !== undefined) {
        playPromise.catch(error => {
            // Si le navigateur bloque encore, on relance au clic
            console.log("Tentative de relance forc√©e...");
            video.play();
        });
    }
}
</script>

</body>
</html>
